<!doctype html>
<html lang="en">
	<head>
		<title>Meshmill</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" type="text/css" href="css/style.css">
	</head>
	<body>
        <div id="app">
            <div id="tabs">
                <button id="model-tab" class="tab">MODEL</button><br>
                <div id="jobtabs"></div>
                <button id="addjob-tab" class="tab">+<br>ADD JOB</button>
            </div>

            <div id="options">
                <div id="model-options">
                    Model: <input id="stlfile" type="file"><br>
                    <small><button id="reloadstl">Reload from disk</button></small><br>
                    <span id="triangles"></span> triangles

                    <hr>

                    <table>
                    <tr><td class="formlabel">XY origin:</td><td colspan="2"><select id="xyorigin">
                        <option value="fromstl">From STL model</option>
                        <option value="centre">Centre</option>
                        <option value="topleft">Top left</option>
                        <option value="bottomleft">Bottom left</option>
                        <option value="topright">Top right</option>
                        <option value="bottomright">Bottom right</option>
                        <!-- TODO: custom coordinates? -->
                    </select></td></tr>
                    <tr><td class="formlabel">Z origin:</td><td colspan="2"><select id="zorigin">
                        <option value="fromstl">From STL model</option>
                        <option value="top">Top surface</option>
                        <option value="bottom">Bottom surface</option>
                        <!-- TODO: custom coordinates? -->
                    </select></td></tr>
                    </table>

                    Bounds:<br>
                    <span id="bounds"></span>

                    <hr>
                    <table>
                    <tr><td class="formlabel">XY Resolution:</td><td><input type="text" id="resolution"></td><td class="unit-mm"></td></tr>
                    <tr><td class="formlabel">Heightmap:</td><td><span id="heightmapsize"></span> px</td><td><span id="heightmapwarning">WARNING: Large</span></td></tr>
                    <tr><td class="formlabel"><label for="bottomside">Bottom side</label></td><td><input type="checkbox" id="bottomside"></td></tr>
                    </table>

                    <hr>

                    <button id="render-heightmap">Render heightmap</button><br>
                    <button id="model-cancel">Stop</button> <progress max="100" id="model-pct"></progress><br>
                    <span id="model-eta"></span><br>

                    <hr>
                    <img id="heightmap-img">
                </div>

                <div id="toolpath-options" style="display:none">
                    <table>
                    <tr><td class="formlabel">Tool shape:</td><td colspan="2"><select id="toolshape">
                    <option value="ball">Ball-nose end mill</option>
                    <option value="flat">Flat end mill</option>
                    </select></td></tr>

                    <tr><td class="formlabel">Tool diameter:</td><td><input id="tooldiameter"></input></td><td class="unit-mm"></td></tr>
                    <tr><td class="formlabel">X/Y feed rate:</td><td><input id="xyfeed"></input></td><td class="unit-mmmin"></td></tr>
                    <tr><td class="formlabel">Z feed rate:</td><td><input id="zfeed"></input></td><td class="unit-mmmin"></td></tr>
                    <tr><td class="formlabel">Safe Z:</td><td><input id="safez"></input></td><td class="unit-mm"></td></tr>
                    <tr><td class="formlabel">Spindle:</td><td><input id="rpm"></input></td><td>rpm</td></tr>
                    </table>

                    <hr>

                    <table>
                    <tr><td class="formlabel">Cut direction:</td><td colspan="2"><select id="direction">
                        <option value="horizontal">Horizontal (along X)</option>
                        <option value="vertical">Vertical (along Y)</option>
                    </select></td></tr>
                    <tr><td class="formlabel">Step over:</td><td><input id="stepover"></input></td><td class="unit-mm"></td></tr>
                    <tr><td class="formlabel">Nominal deviation:</td><td><span id="surfacedeviation"></span></td><td class="unit-mm"></td></tr>
                    <tr><td class="formlabel">Step down:</td><td><input id="stepdown"></input></td><td class="unit-mm"></td></tr>
                    <tr><td class="formlabel">Clearance:</td><td><input id="clearance"></input></td><td class="unit-mm"></td></tr>
                    </table>

                    <hr>

                    <table>
                    <tr><td class="formlabel"><label for="roughingonly">Roughing only</label></td>
                    <td><input type="checkbox" id="roughingonly"></td></tr>
                    <tr><td class="formlabel"><label for="rampentry">Ramp entry (UNIMPLEMENTED)</label></td>
                    <td><input type="checkbox" id="rampentry"></td></tr>
                    <tr><td class="formlabel"><label for="omittop">Omit top (UNIMPLEMENTED)</label></td>
                    <td><input type="checkbox" id="omittop"></td></tr>
                    <tr><td class="formlabel"><label for="clearbottom">Clear bottom</label></td>
                    <td><input type="checkbox" id="clearbottom"></td></tr>
                    </table>

                    <hr>

                    <button id="generate-toolpath">Generate toolpath</button><br>
                    <button id="toolpath-cancel">Stop</button> <progress max="100" id="toolpath-pct"></progress><br>
                    <span id="toolpath-eta"></span><br>
                    <button id="save-gcode">Save G-code</button><br>
                    Cycle time estimate: <span id="cycletime">45m23s</span><br>
                    <small><button id="deletejob">Delete job</button></small><br>
                </div>
            </div>

            <div id="scene"></div>
        </div>

		<script src="js/lib/three.min.js"></script>
        <script src="js/lib/STLLoader.js"></script>
        <script src="js/lib/OrbitControls.js"></script>
		<script src="js/lib/jquery-3.6.0.min.js"></script>
        <script src="js/project.js"></script>
        <script src="js/settings.js"></script>
        <script src="js/heightmap.js"></script>
        <script src="js/toolpath.js"></script>
        <script src="js/3d.js"></script>
        <script src="js/progress.js"></script>
        <script src="js/ui.js"></script>
	</body>
</html>

